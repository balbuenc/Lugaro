@page "/DeletePosition/{id:int}"
@using Model
@using Interfaces
@inject IPositionService PositionService
@inject NavigationManager NavigationManager


<h1>Category Details</h1>

<EditForm Model="@cargo" OnValidSubmit="DeletePosition">
    <DataAnnotationsValidator />
    @*<ValidationSummary />*@

<table class="table">
    <tr>
        <td>ID</td>
        <td><input type="text" @bind="cargo.id_cargo" disabled="disabled" class="form-control" /></td>
    </tr>
    <tr>
        <td>Area</td>
        <td><input type="text" @bind="cargo.id_area"  disabled="disabled" class="form-control" /></td>
    </tr>
    <tr>
        <td>Cargo</td>
        <td><input type="text" @bind="cargo.cargo" disabled="disabled" class="form-control" /></td>
    </tr>

    <tr>
        <td colspan="2" style="text-align:center">
            <input type="submit" value="Delete" />
            <input type="button" value="Cancel" @onclick="Cancel" />
        </td>
    </tr>
</table>

</EditForm>


@code {

    [Parameter]
    public int id { get; set; }

    Position cargo = new Position();

    protected async override Task OnInitializedAsync()
    {
        if (id > 0)
            cargo = await PositionService.GetPositionDetails(id);
    }

    protected async Task DeletePosition()
    {
        await PositionService.DeletePosition(id);

        NavigateToCategories();
    }

    public void NavigateToCategories()
    {
        NavigationManager.NavigateTo("/cargo");
    }

    public void Cancel()
    {
        NavigateToCategories();
    }
}